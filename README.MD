### CI core

#### CI core - ядро CI системы, состоящее из двух частей: билд-сервера и билд-агента.

Что реализовано на стороне сервера:

1. Ручка `/notify-agent` для регистрации агентов - регистрирует агент, добавляя его в стейт приложения, в ответ отдаёт агенту список билдов
1. Ручка `/notify-build-result` - когда агент дергает этот метод, обновляем статус билда в стейте приложения

Что нужно для запуска сервера:

1. В дирректории server выолнить `npm install`
1. В конфиги сервера `server-conf.json` добавить apiToken
1. Выполнить npm start

Что реализовано на стороне агента:

1. При запуске дергается ручка регистрации агента
1. Ручка `/build`, которую дергает билд-сервер, здесь агент выполняет команду, которую ему передали в дочернем процессе node exec, и в случае ее выполнения дегает ручку сервера `/notify-build-result`
1. При отключении агента - дергается ручка `kill-agent`, утилизирующая агента

Трейдоффы:

1. В ручке `/build` не используем repoUrl, hash потому что нет понимания, как вообще достучаться до репозитория и что-то там выполнить, минуя написанный нами ранее СЕРВЕР приложения
1. Подразумевается, что ручку `/build` на билд-сервере дергает какой-то потребитель, например само СЕРВЕРНОЕ приложение, сам билд-сервер не заботится о самостоятельной отправке билдов агенту
1. В приложении билд-сервера реализован стейт, считаю здесь это допустимым, так как экземпляр сервера, в отличие от агента, подразумевается единственным
